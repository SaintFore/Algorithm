# 算法竞赛中的字符串输入技巧

在算法竞赛中，字符串的读取和处理是一个基础但重要的环节。不同的题目可能需要不同的输入处理方法，掌握多种字符串读取技巧可以帮助我们更高效地解决问题。

## 一、基本输入方法及其特点

### 1. scanf 读取单个单词

```c
char s[1010];
scanf("%s", s);
```

**特点：**
- ✅ 简单直接
- ✅ 自动忽略前导空白字符
- ❌ 遇到空格、制表符或换行符就会停止读取

**适用场景：** 输入为单个单词/标识符，没有空格的场景

### 2. scanf 格式化控制

```c
char s[1010];
scanf(" %[^\n]", s);  // 注意前面的空格，读取一整行
scanf("%[a-z]", s);   // 只读取小写字母
scanf("%[^,]", s);    // 读取直到遇到逗号
```

**特点：**
- ✅ 灵活控制读取内容
- ✅ 可以读取包含空格的字符串
- ❌ 格式控制字符复杂，容易出错

**适用场景：** 需要精确控制读取内容的场景

### 3. fgets 读取整行

```c
char s[1010];
fgets(s, 1010, stdin);

// 去掉换行符
int len = strlen(s);
if (len > 0 && s[len-1] == '\n') s[len-1] = '\0';
```

**特点：**
- ✅ 可以读取带空格的整行
- ✅ 可以控制最大读取长度，防止缓冲区溢出
- ✅ 保留换行符（需额外处理）
- ❌ 使用不当可能会残留换行符

**适用场景：** 需要读取包含空格的完整行

### 4. getchar 逐字符读取

```c
char s[1010];
int i = 0;
char c;
while ((c = getchar()) != '\n' && c != EOF && i < 1009) {
    s[i++] = c;
}
s[i] = '\0';  // 不要忘记字符串结束符
```

**特点：**
- ✅ 完全控制读取过程
- ✅ 可以精确地处理每个字符
- ❌ 代码较长

**适用场景：** 需要在读取过程中进行特殊处理的场景

## 二、算法竞赛中的实用技巧

### 1. 读取多行字符串

```c
char lines[100][1010];
int n = 0;

while (fgets(lines[n], 1010, stdin) != NULL) {
    int len = strlen(lines[n]);
    if (len > 0 && lines[n][len-1] == '\n') lines[n][len-1] = '\0';
    
    // 空行判断（如果需要）
    if (strlen(lines[n]) == 0) break;
    
    n++;
    if (n >= 100) break;  // 防止数组越界
}
```

### 2. 读取带空格的多个字符串

```c
char s1[1010], s2[1010];
scanf(" %[^ ] %[^\n]", s1, s2);  // 读取两个由空格分隔的字符串
```

### 3. 读取字符矩阵

```c
char matrix[100][100];
int n, m;
scanf("%d %d", &n, &m);
getchar();  // 消耗掉换行符

for (int i = 0; i < n; i++) {
    for (int j = 0; j < m; j++) {
        matrix[i][j] = getchar();
    }
    getchar();  // 消耗每行末尾的换行符
}
```

### 4. 按行与不按行读取的混合处理

```c
int n;
scanf("%d", &n);
getchar();  // 消耗换行符

char s[1010];
for (int i = 0; i < n; i++) {
    fgets(s, 1010, stdin);
    // 处理字符串...
}
```

## 三、常见陷阱与解决方法

### 1. scanf 与 fgets 混用导致的问题

当混用 `scanf` 和 `fgets` 时，`scanf` 可能会留下未处理的换行符，导致后续的 `fgets` 立即返回空行。

**解决方法：**
```c
int num;
scanf("%d", &num);
getchar();  // 消耗掉换行符
fgets(s, 1010, stdin);
```

### 2. 空字符串的处理

```c
if (fgets(s, 1010, stdin) != NULL) {
    // 检查是否为空行（只有换行符）
    if (s[0] == '\n') {
        // 处理空行情况
    }
}
```

### 3. 输入结束的判断

```c
char s[1010];
while (fgets(s, 1010, stdin) != NULL) {
    // EOF判断，在比赛中通常按Ctrl+Z（Windows）或Ctrl+D（Unix）产生EOF
    // ...处理每行...
}
```

### 4. 处理不定长的输入

```c
char s[1010];
while (1) {
    if (fgets(s, 1010, stdin) == NULL || s[0] == '\n') break;
    // 处理字符串
}
```

## 四、实际竞赛应用

在实际竞赛中，需要根据题目要求灵活选择输入方法：

1. **如果输入是单个单词**：`scanf("%s", s)` 最简洁
2. **如果输入是整行带空格的文本**：`fgets` 或 `scanf(" %[^\n]", s)` 
3. **如果需要按特定分隔符读取**：使用 `scanf` 的格式化功能或逐字符读取
4. **如果输入包括多种数据类型**：混用不同输入函数，但注意缓冲区问题

结合具体题目的输入格式说明，选择最合适的方法。在有疑问的情况下，建议选择更加严谨但可能略显繁琐的方法，确保输入的正确性。
